import{e as p,f as y,g as _,h as f,c as o,o as i,a as t,i as c,j as n,t as r,F as g,r as h,n as x}from"#entry";import{u as b}from"./C63AbLsI.js";const v={class:"bg-gray-50 py-12"},w={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},S={key:0,class:"mt-8 text-center"},C={class:"inline-flex items-center space-x-2 bg-white rounded-full px-6 py-3 shadow-sm"},k={class:"text-xl font-bold text-indigo-600"},A={class:"mt-12 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4"},B={key:0,class:"absolute -top-3 left-1/2 transform -translate-x-1/2"},P={class:"text-center"},L={class:"text-xl font-semibold text-gray-900 mb-2"},z={class:"text-gray-600 text-sm mb-4"},F={class:"mb-6"},M={class:"text-3xl font-bold text-gray-900"},V={class:"text-sm text-gray-500 mt-1"},j={class:"text-xs text-gray-400 mt-1"},T=["onClick","disabled"],D={key:0},G={key:1},I={key:2},N={key:1,class:"mt-12 text-center bg-white rounded-lg shadow-sm border border-gray-200 p-8"},E={class:"max-w-md mx-auto"},R=["disabled"],W={key:0},$={key:1},q={key:2,class:"mt-16"},H={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},J={class:"divide-y divide-gray-200"},K={class:"flex items-center space-x-3"},O={class:"text-sm font-medium text-gray-900"},Q={class:"text-xs text-gray-500"},U={class:"text-right"},X={class:"text-sm font-medium text-gray-900"},Y={class:"text-xs text-gray-500 capitalize"},ot=p({__name:"shop",setup(Z){const a=y(),d=b(),u=async()=>{try{await a.signInWithGoogle()}catch(l){console.error("Sign in failed:",l)}},m=async l=>{if(!a.isAuthenticated){await u();return}try{await d.createPaymentSession(l,"stripe")}catch(e){console.error("Purchase failed:",e)}};return _(async()=>{a.isAuthenticated&&await d.fetchTransactions()}),f(()=>a.isAuthenticated,async l=>{l&&await d.fetchTransactions()}),(l,e)=>(i(),o("div",v,[t("div",w,[e[8]||(e[8]=t("div",{class:"text-center"},[t("h1",{class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"}," Coin Packages "),t("p",{class:"mt-4 text-lg text-gray-600"}," Choose the perfect coin package for your needs ")],-1)),n(a).isAuthenticated?(i(),o("div",S,[t("div",C,[e[0]||(e[0]=t("svg",{class:"w-6 h-6 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 2L3 7v11h14V7l-7-5z"})],-1)),e[1]||(e[1]=t("span",{class:"text-lg font-semibold text-gray-700"},"Current Balance:",-1)),t("span",k,r(n(a).coinBalance)+" Coins",1)])])):c("",!0),t("div",A,[(i(!0),o(g,null,h(n(d).packages,s=>(i(),o("div",{key:s.id,class:x(["relative bg-white rounded-2xl shadow-sm border border-gray-200 p-8 hover:shadow-lg transition-shadow duration-200",{"ring-2 ring-indigo-600 ring-opacity-50":s.popular}])},[s.popular?(i(),o("div",B,[...e[2]||(e[2]=[t("span",{class:"bg-indigo-600 text-white px-3 py-1 text-sm font-medium rounded-full"}," Most Popular ",-1)])])):c("",!0),t("div",P,[e[3]||(e[3]=t("div",{class:"w-16 h-16 mx-auto bg-yellow-100 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-8 h-8 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 2L3 7v11h14V7l-7-5z"})])],-1)),t("h3",L,r(s.name),1),t("p",z,r(s.description),1),t("div",F,[t("span",M,"€"+r(s.price.toFixed(2)),1),t("div",V,r(s.coins.toLocaleString())+" coins ",1),t("div",j," €"+r((s.price/s.coins*1e3).toFixed(2))+" per 1000 coins ",1)]),t("button",{onClick:tt=>m(s.id),disabled:n(d).processingPayment||!n(a).isAuthenticated,class:x(["w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",{"bg-indigo-700":s.popular}])},[n(d).processingPayment?(i(),o("span",D,"Processing...")):n(a).isAuthenticated?(i(),o("span",I,"Buy "+r(s.name),1)):(i(),o("span",G,"Sign in to purchase"))],10,T)])],2))),128))]),n(a).isAuthenticated?c("",!0):(i(),o("div",N,[t("div",E,[e[4]||(e[4]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"}," Sign in to start purchasing ",-1)),e[5]||(e[5]=t("p",{class:"text-gray-600 mb-6"}," Create an account with Google to securely purchase coin packages and track your balance. ",-1)),t("button",{onClick:u,disabled:n(a).loading,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[n(a).loading?(i(),o("span",W,"Signing in...")):(i(),o("span",$,"Sign in with Google"))],8,R)])])),n(a).isAuthenticated&&n(d).recentTransactions.length>0?(i(),o("div",q,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Recent Purchases",-1)),t("div",H,[t("div",J,[(i(!0),o(g,null,h(n(d).recentTransactions,s=>(i(),o("div",{key:s.id,class:"p-4 flex items-center justify-between"},[t("div",K,[e[6]||(e[6]=t("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 2L3 7v11h14V7l-7-5z"})])],-1)),t("div",null,[t("p",O,r(s.coins)+" coins purchased ",1),t("p",Q,r(new Date(s.created_at).toLocaleDateString()),1)])]),t("div",U,[t("p",X,"€"+r(s.amount.toFixed(2)),1),t("p",Y,r(s.status),1)])]))),128))])])])):c("",!0)])]))}});export{ot as default};
