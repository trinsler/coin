import{e as y,f as v,k as w,p as u,g as _,c as i,o as n,a as t,t as l,j as r,b as p,w as m,_ as b,l as k,d as B,F as C,r as M,n as S}from"#entry";import{u as z}from"./C63AbLsI.js";const j={class:"bg-gray-50 min-h-screen py-12"},V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},A={class:"mb-8"},L={class:"mt-2 text-gray-600"},N={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},T={class:"bg-white overflow-hidden shadow rounded-lg"},D={class:"p-5"},F={class:"flex items-center"},H={class:"ml-5 w-0 flex-1"},P={class:"text-2xl font-semibold text-gray-900"},E={class:"bg-white overflow-hidden shadow rounded-lg"},U={class:"p-5"},Q={class:"flex items-center"},R={class:"ml-5 w-0 flex-1"},W={class:"text-2xl font-semibold text-gray-900"},q={class:"bg-white overflow-hidden shadow rounded-lg"},G={class:"p-5"},I={class:"flex items-center"},J={class:"ml-5 w-0 flex-1"},K={class:"text-2xl font-semibold text-gray-900"},O={class:"bg-white shadow rounded-lg mb-8"},X={class:"p-6"},Y={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Z=["disabled"],$={class:"bg-white shadow rounded-lg"},tt={key:0,class:"p-6 text-center"},et={key:1,class:"p-6 text-center"},st={class:"mt-6"},ot={key:2,class:"overflow-hidden"},lt={class:"min-w-full divide-y divide-gray-200"},rt={class:"bg-white divide-y divide-gray-200"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ct={class:"px-6 py-4 whitespace-nowrap"},mt=y({__name:"dashboard",setup(xt){const d=v(),c=z(),a=w(!1),g=u(()=>c.transactions.filter(s=>s.type==="purchase"&&s.status==="completed").reduce((s,e)=>s+e.amount,0)),h=u(()=>c.transactions.filter(s=>s.type==="purchase"&&s.status==="completed")),f=async()=>{if(d.user){a.value=!0;try{await d.fetchUserProfile(d.user.id)}catch(s){console.error("Error refreshing balance:",s)}finally{a.value=!1}}};return _(async()=>{a.value=!0;try{await c.fetchTransactions()}finally{a.value=!1}}),(s,e)=>{const x=b;return n(),i("div",j,[t("div",V,[t("div",A,[e[0]||(e[0]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Dashboard",-1)),t("p",L,"Welcome back, "+l(r(d).user?.full_name)+"!",1)]),t("div",N,[t("div",T,[t("div",D,[t("div",F,[e[2]||(e[2]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 2L3 7v11h14V7l-7-5z"})])])],-1)),t("div",H,[t("dl",null,[e[1]||(e[1]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Current Balance",-1)),t("dd",P,l(r(d).coinBalance)+" Coins",1)])])])])]),t("div",E,[t("div",U,[t("div",Q,[e[4]||(e[4]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"})])])],-1)),t("div",R,[t("dl",null,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Spent",-1)),t("dd",W,"€"+l(r(g).toFixed(2)),1)])])])])]),t("div",q,[t("div",G,[t("div",I,[e[6]||(e[6]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])])],-1)),t("div",J,[t("dl",null,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Purchases",-1)),t("dd",K,l(r(h).length),1)])])])])])]),t("div",O,[e[9]||(e[9]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-medium text-gray-900"},"Quick Actions")],-1)),t("div",X,[t("div",Y,[p(x,{to:"/shop",class:"flex items-center p-4 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors"},{default:m(()=>[...e[7]||(e[7]=[t("div",{class:"flex-shrink-0"},[t("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])],-1),t("div",{class:"ml-4"},[t("h3",{class:"text-sm font-medium text-gray-900"},"Buy More Coins"),t("p",{class:"text-sm text-gray-500"},"Browse coin packages")],-1)])]),_:1}),t("button",{onClick:f,disabled:r(a),class:"flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50"},[...e[8]||(e[8]=[k('<div class="flex-shrink-0"><svg class="w-6 h-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg></div><div class="ml-4"><h3 class="text-sm font-medium text-gray-900">Refresh Balance</h3><p class="text-sm text-gray-500">Update coin count</p></div>',2)])],8,Z)])])]),t("div",$,[e[16]||(e[16]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-medium text-gray-900"},"Transaction History")],-1)),r(a)?(n(),i("div",tt,[...e[10]||(e[10]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("p",{class:"mt-2 text-sm text-gray-500"},"Loading transactions...",-1)])])):r(c).transactions.length===0?(n(),i("div",et,[e[12]||(e[12]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z"})],-1)),e[13]||(e[13]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No transactions yet",-1)),e[14]||(e[14]=t("p",{class:"mt-1 text-sm text-gray-500"},"Start by purchasing your first coin package!",-1)),t("div",st,[p(x,{to:"/shop",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"},{default:m(()=>[...e[11]||(e[11]=[B(" Browse Packages ",-1)])]),_:1})])])):(n(),i("div",ot,[t("table",lt,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Coins "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ")])],-1)),t("tbody",rt,[(n(!0),i(C,null,M(r(c).transactions,o=>(n(),i("tr",{key:o.id},[t("td",at,l(new Date(o.created_at).toLocaleDateString()),1),t("td",it,l(o.type),1),t("td",nt," €"+l(o.amount.toFixed(2)),1),t("td",dt,l(o.coins),1),t("td",ct,[t("span",{class:S(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":o.status==="completed","bg-yellow-100 text-yellow-800":o.status==="pending","bg-red-100 text-red-800":o.status==="failed"}])},l(o.status),3)])]))),128))])])]))])])])}}});export{mt as default};
