import{e as k,x as S,f as B,k as i,g as C,c as n,o as r,a as t,i as y,j as s,t as c,b as p,w as m,d as g,_ as P,l as N}from"#entry";import{u as j}from"./C63AbLsI.js";import{_ as V}from"./DlAUqK2U.js";const M={class:"min-h-screen flex items-center justify-center bg-gray-50"},T={class:"max-w-md w-full space-y-8"},I={class:"text-center"},A={key:0,class:"space-y-4"},D={key:1,class:"space-y-4"},L={class:"text-gray-600"},z={class:"space-y-2"},E={key:2,class:"space-y-6"},R={key:0,class:"bg-yellow-50 rounded-lg p-4 border border-yellow-200"},q={class:"flex items-center justify-center space-x-2"},H={class:"text-lg font-semibold text-yellow-800"},U={class:"text-sm text-yellow-700 text-center mt-2"},Y={class:"space-y-3"},F={key:1,class:"text-xs text-gray-500 text-center"},G=k({__name:"success",setup(J){const w=S(),l=B(),u=j(),d=i(!0),o=i(null),h=i(!1),f=i(0),v=i(null),_=async()=>{const x=w.query.session_id;if(!x){o.value="No session ID provided",d.value=!1;return}try{if((await u.handlePaymentSuccess(x)).success){h.value=!0,await u.fetchTransactions();const a=u.recentTransactions[0];f.value=a?.coins||0,v.value=a?.id||null,l.user&&await l.fetchUserProfile(l.user.id)}else o.value="Payment verification failed"}catch(e){console.error("Payment verification error:",e),o.value=e instanceof Error?e.message:"An unexpected error occurred"}finally{d.value=!1}},b=()=>{d.value=!0,o.value=null,_()};return C(()=>{_()}),(x,e)=>{const a=P;return r(),n("div",M,[t("div",T,[t("div",I,[s(d)?(r(),n("div",A,[...e[0]||(e[0]=[t("div",{class:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-indigo-600 border-t-transparent"},null,-1),t("h2",{class:"text-xl font-semibold text-gray-900"},"Processing payment...",-1),t("p",{class:"text-gray-600"},"Please wait while we verify your transaction.",-1)])])):s(o)?(r(),n("div",D,[e[2]||(e[2]=t("div",{class:"mx-auto h-12 w-12 rounded-full bg-red-100 flex items-center justify-center"},[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),e[3]||(e[3]=t("h2",{class:"text-xl font-semibold text-gray-900"},"Payment verification failed",-1)),t("p",L,c(s(o)),1),t("div",z,[t("button",{onClick:b,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium"}," Try again "),p(a,{to:"/shop",class:"block w-full bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md text-sm font-medium text-center"},{default:m(()=>[...e[1]||(e[1]=[g(" Back to shop ",-1)])]),_:1})])])):s(h)?(r(),n("div",E,[e[7]||(e[7]=N('<div class="relative" data-v-5961f089><div class="mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center" data-v-5961f089><svg class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" data-v-5961f089><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" data-v-5961f089></path></svg></div><div class="absolute inset-0 pointer-events-none" data-v-5961f089><div class="confetti-animation" data-v-5961f089></div></div></div><div class="space-y-2" data-v-5961f089><h2 class="text-2xl font-bold text-gray-900" data-v-5961f089>Payment Successful! ðŸŽ‰</h2><p class="text-gray-600" data-v-5961f089>Your coins have been added to your account.</p></div>',2)),s(f)?(r(),n("div",R,[t("div",q,[e[4]||(e[4]=t("svg",{class:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 2L3 7v11h14V7l-7-5z"})],-1)),t("span",H,"+"+c(s(f))+" Coins Added!",1)]),t("p",U," New balance: "+c(s(l).coinBalance)+" coins ",1)])):y("",!0),t("div",Y,[p(a,{to:"/dashboard",class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium text-center block"},{default:m(()=>[...e[5]||(e[5]=[g(" View Dashboard ",-1)])]),_:1}),p(a,{to:"/shop",class:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-medium text-center block"},{default:m(()=>[...e[6]||(e[6]=[g(" Buy More Coins ",-1)])]),_:1})]),s(v)?(r(),n("div",F," Transaction ID: "+c(s(v)),1)):y("",!0)])):y("",!0)])])])}}}),W=V(G,[["__scopeId","data-v-5961f089"]]);export{W as default};
