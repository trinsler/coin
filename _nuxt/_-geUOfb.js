import{e as x,f as g,q as m,k as d,g as p,h as v,c as o,o as n,a as e,j as i,t as y,l as b,s as k,v as c}from"#entry";const w={class:"min-h-screen flex items-center justify-center bg-gray-50"},_={class:"max-w-md w-full space-y-8"},j={class:"text-center"},A={key:0,class:"space-y-4"},C={key:1,class:"space-y-4"},B={class:"text-gray-600"},S={key:2,class:"space-y-4"},P=x({__name:"callback",setup(M){const u=g(),r=m(),l=d(!0),a=d(null),h=async()=>{try{await k(),r.value?(await u.fetchUserProfile(r.value.id),await c("/dashboard")):a.value="Authentication failed. Please try again."}catch(s){console.error("Auth callback error:",s),a.value=s instanceof Error?s.message:"An unexpected error occurred"}finally{l.value=!1}},f=()=>{c("/")};return p(async()=>{setTimeout(h,1e3)}),v(r,s=>{s&&!l.value&&c("/dashboard")},{immediate:!0}),(s,t)=>(n(),o("div",w,[e("div",_,[e("div",j,[i(l)?(n(),o("div",A,[...t[0]||(t[0]=[e("div",{class:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-indigo-600 border-t-transparent"},null,-1),e("h2",{class:"text-xl font-semibold text-gray-900"},"Completing sign in...",-1),e("p",{class:"text-gray-600"},"Please wait while we set up your account.",-1)])])):i(a)?(n(),o("div",C,[t[1]||(t[1]=e("div",{class:"mx-auto h-12 w-12 rounded-full bg-red-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Authentication failed",-1)),e("p",B,y(i(a)),1),e("button",{class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium",onClick:f}," Try again ")])):(n(),o("div",S,[...t[3]||(t[3]=[b('<div class="mx-auto h-12 w-12 rounded-full bg-green-100 flex items-center justify-center"><svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"></path></svg></div><h2 class="text-xl font-semibold text-gray-900">Welcome!</h2><p class="text-gray-600">You have been successfully signed in.</p>',3)])]))])])]))}});export{P as default};
